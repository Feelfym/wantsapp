<%= form_with(model: item) do |form| %>
  <%= render 'shared/error_modal', object: item %>

  <div class="form-group mb-5">
    <% if item.persisted? %>
      <h2>アイテム編集</h2>
    <% else %>
      <h2>新規アイテム登録</h2>
    <% end %>
  </div>

  <div class="form-group">
    <div class="d-flex align-items-center">
      <%= form.label :画像をアップロード, class: "form-label"%>
      <span class="badge badge-primary ml-2 mb-2">任意</span>
    </div>
    <%= form.file_field :image, class: "form-control border border-0" %>
  </div>

  <div class="form-group">
    <div class="d-flex align-items-center">
      <%= form.label :アイテムの名称, class: "form-label" %>
      <div class="badge badge-danger ml-2 mb-2" style="height: 20px;">必須</div>
    </div>
    <%= form.text_field :name, class: "form-control" %>
  </div>

  <div class="form-group">
    <div class="d-flex align-items-center">
      <%= form.label :アイテムの説明と購入理由, class: "form-label" %>
      <div class="badge badge-danger ml-2 mb-2" style="height: 20px;">必須</div>
    </div>
    <%= form.text_area :description, class: "form-control" %>
  </div>

  <div class="form-group">
    <div class="d-flex align-items-center">
      <%= form.label :価格, class: "form-label" %>
      <div class="badge badge-danger ml-2 mb-2" style="height: 20px;">必須</div>
    </div>
    <%= form.text_field :price, class: "form-control" %>
  </div>

  <div class="form-group">
    <div class="d-flex align-items-center">
      <%= form.label :購入予定日, class: "form-label" %>
      <span class="badge badge-primary ml-2 mb-2">任意</span>
    </div>
    <%= form.date_field :will_purchase_date, class: "form-control" %>
  </div>

  <div class="form-group">
    <div class="d-flex align-items-center">
      <%= form.label :商品URL, class: "form-label" %>
      <span class="badge badge-primary ml-2 mb-2">任意</span>
    </div>
    <%= form.text_field :url, class: "form-control" %>
  </div>

  <% if params[:source] %>
    <%= hidden_field_tag :source, params[:source] %>
  <% end %>

  <% if params[:comparison_id] %>
    <%= hidden_field_tag :comparison_id, params[:comparison_id] %>
  <% end %>

  <div class="form-group">
    <% if item.persisted? %>
      <%= form.submit '更新', class: "btn btn-outline-primary", data: {turbo: false} %>
    <% else %>
      <%= form.submit '作成', class: "btn btn-outline-primary", data: {turbo: false} %>
    <% end %>
  </div>
<% end %>

<% if item.errors.any? %>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      $('#errorModal').modal('show');
    });
  </script>
<% end %>
